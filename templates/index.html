{% extends "geonode_base.html" %}
{% load i18n %}
{% load staticfiles %}
{% load base_tags %}

{% block title %} {% trans "Welcome!" %} - GeoSAFE {% endblock %}
{% block body_class %}home{% endblock %}

{% block middle %}
  {% block hero %}
  <div class="jumbotron">
  	<div class="container">
  		<h1>{% trans "GeoSAFE" %}</h1>
  		<p></p>
        <div id='mySwipe' style='max-width:320px;max-height:240px;margin:0 auto' class='swipe'>
            <div class='swipe-wrap'>
                <div><img src="{% static 'geosafe/img/geosafe-menu.png' %}"/></div>
                <div><img src="{% static 'geosafe/img/geosafe-impact-visualisation.png' %}"/></div>
                <div><img src="{% static 'geosafe/img/analysis-result.png' %}"/></div>
            </div>
        </div>
        <p></p>
  		<p>{% blocktrans %}GeoSAFE is a django app that integrates inaSAFE Headless functionality into Geonode.{% endblocktrans %}</p>
		<p>{% blocktrans %}This app visually analyzes an impact on a map in the event of disaster.{% endblocktrans %}</p>
		<p>{% blocktrans %}Analysis reports can also be generated and saved for future reference.{% endblocktrans %}</p>
        <p style="text-align: center">
            <a href="#what-anchor" role="button">{% blocktrans %}<i class="fa fa-arrow-circle-o-down fa-3x"></i>{% endblocktrans %}</a>
        </p>

  	</div>
  </div>
  {% include "_status_message.html" %}
  {% include "_announcements.html" %}
  {% include "_messages.html" %}
  <a class="anchor" id="what-anchor"></a>
  <section id="what-section" class="safe-section">
    <div class="container">
      <div class="row">
        <h1>What can GeoSAFE do?</h1>
          <div id='mySwipeWhat' style='max-width:320px;max-height:240px;margin:0 auto' class='swipe-what'>
              <div class='swipe-what-wrap'>
                  <div><img src="{% static 'geosafe/img/geosafe-menu.png' %}"/></div>
                  <div><img src="{% static 'geosafe/img/analysis-list.png' %}"/></div>
                  <div><img src="{% static 'geosafe/img/analysis-result.png' %}"/></div>
                  <div><img src="{% static 'geosafe/img/meta-search.png' %}"/></div>
              </div>
          </div>

          <div class="row">
            <ul>
                <li>
                    <b>Perform Analysis</b>
                    <p>
                        Analyze a map according to the given layers (exposure and hazard) and generate InaSAFE report
                    </p>
                </li>
                <li>
                    <b>Analysis List</b>
                    <p>
                        Contain saved map analysis for future reference
                    </p>
                </li>
                <li>
                    <b>Metasearch</b>
                    <p>
                        Search based on Catalog Service for the Web (CSW)
                    </p>
                </li>
            </ul>
        </div>
          <p style="text-align: center">
              <a href="#how-anchor" role="button">{% blocktrans %}<i class="fa fa-arrow-circle-o-down fa-3x"></i>{% endblocktrans %}</a>
          </p>
      </div>
    </div>
  </section>


  <a class="anchor" id="how-anchor"></a>
  <section id="how-section" class="safe-section">
    <div class="container">
      <div class="row">
        <h1>How to run an Analysis?</h1>
          <div id='mySwipeHow' style='max-width:320px;max-height:240px;margin:0 auto' class='swipe-how'>
              <div class='swipe-how-wrap'>
                  <div><img src="{% static 'geosafe/img/select-hazard.png' %}"/></div>
                  <div><img src="{% static 'geosafe/img/select-exposure.png' %}"/></div>
                  <div><img src="{% static 'geosafe/img/select-impact-layer.png' %}"/></div>
                  <div><img src="{% static 'geosafe/img/analysis-being-run.png' %}"/></div>
              </div>
          </div>
        <div class="row">
            <ul>
                <li>
                    Select an exposure layer (road, structure, population)
                </li>
                <li>
                    Select a hazard layer (flood, tsunami, earthquake, volcano, and volcanic ash)
                </li>
                <li>
                    Select an impact function
                </li>
            </ul>
            <div class="extra-note">
                That's it. Ready to go...
            </div>
        </div>
      </div>
    </div>
  </section>

  {% endblock %}

  {% block mainbody %}
  <div class="big-search">
  	<div class="container">
  		<h1>{% trans "Search for Data." %}</h1>
  		<div class="search">
  			<form id="search" action="{% url "search" %}" >
  				<span class="fa fa-search fa-2x"></span>
  				{% if HAYSTACK_SEARCH %}
  				<input id="search_input" type="text" placeholder="Search" class="form-control" name="q">
  				{% else %}
  				<input id="search_input" type="text" placeholder="Search" class="form-control" name="title__icontains">
  				{% endif %}
  			</form>
  		</div>
  		<p><a class="btn btn-default btn-lg" href="/search/">Advanced Search</a></p>
  	</div>
  </div>

  {% block datasets %}
  {% endblock %}

  {% block showcase %}
  {% endblock %}

  {% endblock %}

{% endblock %}

{% block extra_script %}
{{ block.super }}
{% if DEBUG_STATIC %}
<script src="{{ STATIC_URL }}lib/js/angular.js"></script>
{% endif %}
<script type="text/javascript" src="{% static 'geosafe/js/swipe.js' %}"></script>
<script type="text/javascript">
    FEATURED_URL = '{% url 'api_dispatch_list' api_name='api' resource_name='featured' %}'
    'use strict';
    (function(){
      var module = angular.module('featured', []);
      module.run(function($http, $rootScope){
        $http.get(FEATURED_URL).success(function(data){
          $rootScope.featured = data.objects;
        });
      });
    })();
    var scrollTimer = 10000;
    var elem = document.getElementById('mySwipe');
    window.mySwipe = Swipe(elem, {
        auto: scrollTimer,
        continuous: true,
    });
    var elemWhat = document.getElementById('mySwipeWhat');
    window.mySwipeWhat = Swipe(elemWhat, {
        auto: scrollTimer,
        continuous: true,
    });
    var elemHow = document.getElementById('mySwipeHow');
    window.mySwipeHow = Swipe(elemHow, {
        auto: scrollTimer,
        continuous: true,
    });

</script>
<script>
	$('[data-toggle="tooltip"]').tooltip();
</script>

<link rel="stylesheet" href="{% static 'geosafe/css/swipe_style.css' %}"/>
<style>
    .swipe, .swipe-what, .swipe-how {
         overflow: hidden;
         visibility: hidden;
         position: relative;
    }
    .swipe-wrap, .swipe-what-wrap, .swipe-how-wrap {
         overflow: hidden;
         position: relative;
    }
    .swipe-wrap > div, .swipe-what-wrap > div, .swipe-how-wrap > div {
         float:left;
         width:100%;
         position: relative;
    }

    #what-section {
        background-color: #eee;
    }
    
    #how-section {
        background-color: #2c689c;
        color: #fff;
    }

    .extra-note {
        padding-left: 15px;
        margin-top: 20px;
        font-size: 18px;
    }

    #how-section li {
        padding-top: 15px;
        padding-bottom: 15px;
    }

    .safe-section {
        padding-top: 50px;
        padding-bottom: 50px;
    }

    .safe-section, .btn-default {
        min-width: 320px;
        border: 2px solid #2c689c;
    }

    .safe-section h1 {
        font-size: 45px;
        text-shadow: 2px 2px 2px rgba(0, 0, 0, 0.2);
    }

    .safe-section ul {
        font-size: 20px;
        padding-top: 15px;
    }

    .safe-section p {
        padding-top: 10px;
        padding-bottom: 10px;
    }

    .big-search {
        background: #474747 !important;
    }

    a.anchor {
        display: block;
        position: relative;
        top: -75px;
        visibility: hidden;
    }

    .fa-arrow-circle-o-down {
        color: black;
    }

    .fa-arrow-circle-o-down:hover {
        color: red;
    }
</style>
{% endblock extra_script %}
